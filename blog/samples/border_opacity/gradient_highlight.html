<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Type" content="text/javascript; charset=utf-8" />
		<meta http-equiv="Content-Type" content="text/css; charset=utf-8" />
        <title>New Web Project</title>
		<script src='./lib/jquery/jquery-1.3.2.js' type="text/javascript"></script>

<script type="text/javascript">
(function($) {
  //var userAgent = navigator.userAgent.toLowerCase();
  $.extend($.browser, {
    //iphone: $.browser.safari && /iphone/.test(userAgent),
    chrome: $.browser.safari && /chrome/.test(userAgent)
  });
})(jQuery);

(function($){
$.fn.extend({
gradientHighlightShow:function(options){
	var opt = $.extend({
		color:'#fff',
		gradientWidth:10,
		duration:300,
		firstOpacity:0.8
	},options);
this.each(function(){
	var $graWrap = $('.highlight-wrap', this);
	
	if ($graWrap.length == 0) {
	
		var
			$this = $(this),
			$img = $(':only-child', $this),
			$tgt = null,
			imgOffset = $img.offset();
		
		//alert('outer' + $img.outerHeight()+'\ninner' + $img.innerHeight());
		//alert($img.css('border-top-color'));
		//alert($img.css('border-top-width'));
		//alert(imgOffset.top);

		imgOffset.top = imgOffset.top + parseInt($img.css('border-top-width').match(/\d+/)) + 'px';
		imgOffset.left = imgOffset.left + parseInt($img.css('border-left-width').match(/\d+/)) + 'px';
		
		$graWrap = $('<div>')
			.addClass('highlight-wrap')
			.css({
				position: 'absolute',
				top: imgOffset.top,
				left: imgOffset.left,
				padding: 0,
				margin: 0,
				opacity: 1,
				width: $img.innerWidth(),
				height: $img.innerHeight()
			})
			.appendTo($this);
		
		
		
		$tgt = $graWrap;
		for(var i = opt.gradientWidth;i > 0;i--){
			
			var $gra = $('<div/>')
				.css({
					padding: 0,
					margin: 0,
					width: $tgt.width() - 2,
					height: $tgt.height() - 2,
					border: '1px solid ' + opt.color,
					opacity: opt.firstOpacity
				}).appendTo($tgt);
			
			$tgt = $gra;
			opt.firstOpacity = $.browser.mozilla ? opt.firstOpacity : i /opt.gradientWidth;
		}
	}
	
	$graWrap.css({opacity:1});
	//$graWrap.stop(true).animate({opacity:1},{duration:opt.duration});
});
},
gradientHighlightHide: function(options){
	var opt = $.extend({
		duration:400,
		opacity:0
	},options);
	
	this.each(function(){
		$('.highlight-wrap', this).css({opacity:0});
		//$('.highlight-wrap', this).stop(true).animate({opacity:opt.opacity},{duration:opt.duration});
	});
}
});
})(jQuery);

$(function(){
alert($.browser.chrome);
$('a:has(img)').each(function(index, elm){
	$(elm).hover(function(){
		$(elm).gradientHighlightShow();
	},function(){
		$(elm).gradientHighlightHide();
	});
});
});
</script>

<style type="text/css">
*{margin:0;padding:0;}
body{background-color:#000;}
.img-wrap{}


a img{
	border-width:0;
	vertical-align:middle;
	text-decoration:underline;
	/*border:1px solid red;*/
}
a{
	cursor:pointer;
}

.test{
	border-top: 20px solid red;
	filter: alpha(opacity=50);
	-moz-opacity:0.5;
	opacity:0.5;
}
.test.outer{
	margin:20px;
	width:100px;
}

.test.core{}

.img-a .back{
	display:none;
	top:0;
	left:0;
	position:absolute;
	border:2px solid #1a1a1a;
}
.img-a:hover .back{
	display:block;
}

#header ul#navigation li.first ul { visibility: hidden; }
#header ul#navigation li.first:hover ul { visibility: visible; }

</style>
    </head>
    <body>
		<div class="img-wrap">
			<a class="img-a" href="#">
				<img class='front' src="tk.jpg"/>
				<img class='back' src="tk.jpg" />
			</a>
		</div>
		<div class="test outer">
			<div class="test"><div class="test core"></div></div>
		</div>
    </body>
</html>
