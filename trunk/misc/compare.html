<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="Content-Script-Type" content="text/javascript; charset=utf-8" />
	<meta http-equiv="Content-Style-Type" content="text/css; charset=utf-8" />
	<title>New Web Project</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
jQuery(function($){

var
values = [
	{ name: 'null',              value: null },                  //null
	{ name: 'undefind',          value: (function(){return;})()},//undefind
	{ name: '""',                value: '' },                    //String Empty
	{ name: '"false"',           value: 'false' },               //String false
	{ name: '"0"',               value: '0' },                   //String Zero
	{ name: '"undefind"',        value: 'undefind' },            //String undefind
	{ name: '" \\t\\r\\n "',     value: ' \t\r\n ' },            //control character \t, \f, \r, \n ,\b
	{ name: '"null"',            value: 'null' },                //String null
	{ name: 'new String("0")',   value: new String('0') },       //String Object
	{ name: '0',                 value: 0 },                     //Number Zero
	{ name: 'new Number("0")',   value: new Number(0) },         //Number Object
	{ name: 'NaN',               value: NaN },                   //NaN
	{ name: '[]',                value: [] },                    //Array Reteral
	{ name: 'new Array([])',     value: new Array([]) },         //Array Object
	{ name: '{}',                value: {} },                    //Object Reteral
	{ name: 'new Object()',      value: new Object() },          //Object
	{ name: 'true',              value: true },                  //Boolean Reteral true
	{ name: 'false',             value: false },                 //Boolean Reteral false
	{ name: 'new Boolean()',     value: new Boolean() },         //Boolean Object
	{ name: 'new Date()',        value: new Date() },            //Date Object
	{ name: '/(?:)/',            value: /(?:)/ },                //RegExp Reteral
	{ name: 'new RegExp()',      value: new RegExp() },          //RegExp Object
	{ name: 'function',          value: function(){} },          //Function Reteral
	{ name: 'new Function()',    value: new Function() },        //Function Object
	{ name: 'new Error()',       value: new Error()},            //Error
	{ name: 'Object',            value: Object }                 //Object
],


instanceOfValues = [
	{
		'instance': String,
		'type': [{
			name: '"foo"',
			value: 'foo'
		}, {
			name: 'new String("foo")',
			value: new String('foo')
		}]
	},	{
		'instance': Number,
		'type': [{
			name: '0',
			value: 0
		}, {
			name: 'new Number(0)',
			value: new Number(0)
		}]
	},	{
		'instance': Boolean,
		'type': [{
			name: 'true',
			value: true
		}, {
			name: 'new Boolean(true)',
			value: new Boolean(true)
		}]
	},	{
		'instance': Array,
		'type': [{
			name: '[]',
			value: []
		}, {
			name: 'new Array([])',
			value: new Array([])
		}]
	},	{
		'instance': RegExp,
		'type': [{
			name: '/(?:)/',
			value: /(?:)/
		}, {
			name: 'new RegExp()',
			value: new RegExp()
		}]
	},	{
		'instance': Object,
		'type': [{
			name: '{}',
			value: {}
		}, {
			name: 'new Object()',
			value: new Object()
		}]
	}
];




function createEqualTable(caption, equal){
	
	var ret = [], ln = values.length;
	
	function arrJoin(tag, arr){
		return "<" + tag + ">" +
			arr.join("</" + tag + "><" + tag + ">") +
			"</" + tag + ">";
	}
	
	//===============================================
	ret.push(arrJoin("th", (function(arr){
		for (var i = 0; i < ln; i++) {
			arr.push(values[i].name);
		}
		return arr;
	})([''])));
	//===============================================
	
	
	var tmp, v;
	for (var ii = 0; ii < ln; ii++) {
		tmp = [];
		v = values[ii].value;
		for (var k = 0; k < ln; k++) {
			tmp.push(k < ii ? '-' : equal(v, values[k].value));
		}
		
		ret.push(
			"<th>" + values[ii].name + "</th>" +
			"<td>" + tmp.join("</td><td>") + "</td>");
	}
	
	return $("<table>")
		.attr("cellSpacing","0")
		.append(
			$("<caption>").html(caption),
			$("<tbody>").append("<tr>" + ret.join("</tr><tr>") + "</tr>"));
}




$('#target').append(createEqualTable('A <b>==</b> B', function (a, b){
	return (a == b);
}));


$('#target').append(createEqualTable('A <b>===</b> B', function (a, b){
	return (a === b);
}));


$('#target td').filter(function(){
	return $(this).text() == 'true';
}).css({
	backgroundColor: '#caa'
}).end().filter(function(){
	return $(this).text() == '-';
}).css({
	backgroundColor: "#999"
});



//===============================================================================
function createSingleTables(caption, id, fn){
	
	var ret = ["<th>Value</th><th>Result</th>"], ln = values.length;
	
	//make Row
	for (var i = 0; i < ln; i++) {
			ret.push(
				"<th>" + values[i].name + "</th>" +
				"<td>" + fn(values[i].value) + "</td>");
	}
	
	return $("<table>").attr({
		"cellSpacing":"0",
		"id":id
	}).append(
		$("<caption>").html(caption),
		"<tbody><tr>" + ret.join("</tr><tr>") + "</tr></tbody>");;
}


$("#target").append(createSingleTables("<b>typeof</b> Value", "typeof",
function (v){
	return typeof v;
}));

$("#target").append(createSingleTables("Value.<b>constructor</b>", "construct",
function(value){
	try{
		return value.constructor.toString().match(/(Array|Boolean|Date|Error|Function|Number|Object|RegExp|String)/g);
	}catch(e){
		return e.toString();
	}
}));






//===============================================================================
function createInstanceOfTable(){
	var
	table = document.createElement("table"),
	regInstType = /(Array|Boolean|Date|Error|Function|Number|Object|RegExp|String)/g,
	instArry = instanceOfValues,
	ln = instArry.length,
	i = 0,
	th = "th",
	td = "td",
	inst, typ;
	
	
	/**
	 * append to tr(row) elemnt
	 * @param {tr Elemnt} row
	 * @param {Array} children
	 */
	function append(elmnt, children){
		var ln = children.length, i = 0, child;
		
		function createNode(tag, text){
			var elm = document.createElement(tag);
			elm.appendChild(document.createTextNode(text));
			return elm;
		}
		
		for (; i < ln;) {
			child = children[i++];
			elmnt.appendChild(createNode(child.tag, child.text));
		}
	}
	
	append(table.insertRow(-1),[
		{tag:th,text:"Object Type"},
		{tag:th,text:"Value"},
		{tag:th,text:"Result"}
	]);
	
	table.id = "inst";
	table.setAttribute("cellSpacing","0");
	append(table,[{tag:"caption",text:"Value instanceof ObjectType"}]);
	
	for (; i < ln; i++) {
		inst = instArry[i].instance;
		typ = instArry[i].type;
		
		append(table.insertRow(-1),[
			{ tag: th, text: inst.toString().match(regInstType) },
			{ tag: td, text: typ[0].name },
			{ tag: td, text: typ[0].value instanceof inst}
		]);
		
		append(table.insertRow(-1),[
			{ tag: td, text: typ[1].name },
			{ tag: td, text: typ[1].value instanceof inst}
		]);
	}
	
	$("tr",table).children(":first-child:odd").attr("rowSpan", "2");
	
	return table;
}


$('#target').append(createInstanceOfTable(),
'<p>Example: "foo" instanceof String // false</p>');


$('#inst td').filter(function(){
	return $(this).text() == 'false';
}).css({
	backgroundColor: '#caa'
}).end().filter(function(){
	return $(this).text() == '';
}).css({
	backgroundColor: '#666'
});




});
</script>
<style>
body{
	font-size:16px;
}
table{
	background-color:#eee;
	border:1px solid #666;
	border-collapse:collapse;
	border-spacing:0;
	empty-cells:show;
	margin-bottom:100px;
	table-layout:fixed;
	text-align:center;
	width:100%;
}
caption{
	line-height:2em;
}
tr{}
th{
	background-color:#ccc;
	font-weight:bold;
	padding:5px 0;
}
th, td {
	border:1px solid #666;
	font-family:monospace;
	font-size:12px;
	line-height: 1.2em;
	overflow:hidden;
}

#typeof, #construct{
	width:300px;
}
#inst{
	width:400px;
	margin-bottom:10px;
}
#inst td{
	line-height:2em;
}
</style>

</head>
<body>
	<div id='target'></div>
</body>
</html>