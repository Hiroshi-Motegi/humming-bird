<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Type" content="text/javascript; charset=utf-8" />
		<meta http-equiv="Content-Type" content="text/css; charset=utf-8" />
		<title>jQuery + Google Data API - jYouTube</title>
		<script src="http://www.google.com/jsapi/" type="text/javascript"></script>
		<script type="text/javascript">google.load('jquery', '1')</script>

<script type="text/javascript">
$.jYouTube = function(data, callback){
	var dt = $.extend({
		'vq': '',
		'orderby': 'relevance', // updated, viewCount, rating, relevance_lang_jpn
		'start-index': 1,
		'racy': 'exclude', // include or exclude
		'max-results': 10,
		'time': 'all_time', // today, this_week, this_month
		'alt': 'json-in-script'
	}, data);
	
	if (dt.vq) {
		$.ajax({
			dataType: 'jsonp',
			data: dt,
			cache: true,
			url: 'http://gdata.youtube.com/feeds/api/videos',
			success: callback
		});
	}
}

$(function(){

	// Usage
	$.jYouTube({vq:'metallica','max-results': 20}, function (data){
		var
		entries = data.feed.entry,
		$table = $('<table>'),
		$tbody = $('<tbody>').appendTo($table),
		$tr = null;
		
		$.each(entries, function(i, entry){
			 var mg = entry.media$group;
			 if (i % 4 == 0) { 
			 	$tr = $('<tr>');
				$tr.appendTo($tbody);
			 }
			 
			$tr.append(
				$('<td>').append(
					$('<a>').attr('href', mg.media$player[0].url).append($('<img/>').attr('src', mg.media$thumbnail[0].url))
				)
			);
		});
		
		$table.appendTo(document.body);
	});

});
</script>
<style type="text/css">
h2{
	text-align: center;
}
a{
	float:left;
	margin:0 0 5px 5px;
	border: 4px solid #333;
}
a img{
	vertical-align:middle;
	border:1px solid #ccc;
}

table{
	margin:0 auto;
}
</style>
    </head>
    <body>
    	<h2>jQuery + Google Data API - jYouTube</h2>
    </body>
</html>