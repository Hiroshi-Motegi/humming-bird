<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Type" content="text/javascript; charset=utf-8" />
		<meta http-equiv="Content-Type" content="text/css; charset=utf-8" />
		<title>jQuery getJSON - demo</title>
		<script src="http://www.google.com/jsapi/" type="text/javascript"></script>
		<script type="text/javascript">google.load('jquery', '1')</script>

<script type="text/javascript">
(function($){
$.flickrPics = function(tag, fn){
	$.getJSON('http://api.flickr.com/services/feeds/photos_public.gne?tagmode=any&format=json&jsoncallback=?&tags=' + tag, fn);
}

$.twitter = function(name, fn){
	$.getJSON('http://twitter.com/status/user_timeline/' + name + '.json?&callback=?', fn);
}

$.twitterUserInfo = function(name, fn){
	$.getJSON('http://twitter.com/status/user_timeline/' + name + '.json?&callback=?',
		function(data){
			fn.call(this, data[0].user);
		});
}

$.twitterSeach = function(keyword, fn){
	$.getJSON('http://search.twitter.com/search.json?callback=?&q=' + keyword, fn);
}

$.bloggerFeed = function(domain, fn){
	$.getJSON('http://www.google.com/reader/public/javascript/feed/http://' + domain + 
		'.blogspot.com/atom.xml?alt=json&n=10&callback=?', fn);
}

$.googleFeed = function(params, callback){
	var data = $.extend({
		q:'',
		v:'1.0',
		hl:'ja',
		key:'',
		context:'',
		num:10,
		scoring:'h',
		output:''
	}, params);
	
	for(var d in data)
		if (!data[d]) { delete data[d] }
	
	$.getJSON('http://ajax.googleapis.com/ajax/services/feed/load?callback=?',
		data, function(data){
			callback.call(this, data.responseData.feed);
	});
}


$.iTunes = {
	categories: {
		Top_Albums: 'topalbums',
		//Top_iMixes: 'topimixes',
		Top_Songs: 'topsongs',
		New_Releases: 'newreleases',
		Just_Added: 'justadded',
		Featured_Albums: 'featuredalbums',
		_default: 'topalbums'
	},
	genre: {
		all: 0,
		electronic: 7,
		folk: 10,
		newAge: 13,
		pop: 14,
		rb_Soul: 15,
		hiphop_Rap: 18,
		world: 19,
		rock: 21,
		jPop: 27
		// etc ...
	},
	feed: function(category, country, limit, genre, params, callback){
		var countries = {
			usa: 143441,
			france: 143442,
			germany: 143443,
			uk: 143444,
			italy: 143450,
			australia: 143460,
			japan: 143462,
			// etc ...
			_default: 143462
		};
		
		params.q = 
			'http://ax.itunes.apple.com/WebObjects/MZStore.woa/wpa/MRSS/' + 
			(category || categories._default) +
			('/sf=' + countries[country.toLowerCase()] || countries._default) +
			('/limit=' + (+limit == limit ? limit : 10)) +
			('/genre=' + (+genre == genre ? genre : 0)) + '/rss.xml';
		
		$.googleFeed(params, callback);
	}
}


})(jQuery);


$(function(){
	// Usage
	$.iTunes.feed(
		$.iTunes.categories.Top_Albums, // category
		'japan', // country
		10, // limit
		$.iTunes.genre.electronic, // genre
	 	{}, //params
		function(feed){
			var $div = $('<div>').append($('<h2>').text(feed.description));
			
		    $.each(feed.entries, function(i, entry){
				$div.append(entry.content);
		    });
		
		$div.appendTo(document.body);
	});


/*
	$.googleFeed({
		'q': 'http://yas-hummingbird.blogspot.com/rss.xml'
	}, function(feed){
		var lst = [];
		
		for(var i=0; i<feed.entries.length; i++){
			var entry = feed.entries[i];
			lst.push('<li><span><a href=' + entry.link + ' >' + entry.title + '</a></span>' + 
				'<span> - ' + (function (date) {
	   				return (date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate());
				})(new Date(entry.publishedDate)) + '</span>');
		}
		
		$('<ul>').append(lst.join('')).appendTo(document.body);
	});
*/
	
	
/*
	$.twitter('gihren', function(data){
		$(document.body).append('<h3>Twitter</h3>');

		$('<ul>').append($.map(data, 
		function(t, i){
			return '<li>' + t.text + '</li>';
		}).join('')).appendTo(document.body);
	});



	
	$.flickrPics( 'color', function (data) {
		$(document.body).append('<h3>flickr Pics</h3>');
		
	    $.each(data.items, function(i, item){
			$('<img>')
				.attr('src', item.media.m)
				.appendTo(document.body);
	    });
	});
	
	
	$.twitterUserInfo('gihren', function(data){
		$(document.body).append('<h3>Twitter User Info</h3>');
		var list = [];
		for (var item in data){
			list.push('<li>' + item + ' : ' + data[item] + '</li>');
		}
		$('<ul>').append(list.join('')).appendTo(document.body);
	});
	
	
	$.twitterSeach('docomo', function(data){
		$(document.body).append('<h3>Twitter Seach</h3>');
		var list = [];
		$.each(data, function(i, tw) {
			for(var i = 0; i < tw.length; i++) {
				if (tw[i].text) {
					list.push('<li>' + tw[i].text + '</li>');
				}
			}
		});
		$('<ul>').append(list.join('')).appendTo(document.body);
	});
	

	
	$.bloggerFeed('googlejapan', function ( data ){
		
		var h3 = document.createElement('h3');
		h3.appendChild(document.createTextNode('Blogger Feed - Google Japan'));
		document.body.appendChild(h3);
		
		var list = document.createElement('ul');
		
		for (i in data.items) {
			var item = data.items[i];
			var post = document.createElement('li');
			
			var link = document.createElement('a');
			link.appendChild(document.createTextNode(item.title));
			link.href = item.alternate.href;
			post.appendChild(link);
			
			var timestamp = document.createElement('span');
			timestamp.appendChild(document.createTextNode(' - ' + 
				(function( date ){
					return date.getFullYear() + '年' + (date.getMonth() + 1) + '月' + date.getDate() + '日';
				})(new Date(item.published * 1000))));
			post.appendChild(timestamp);
			
			list.appendChild(post);
		}
		
		document.body.appendChild(list);
	});
*/

});
</script>

<style type="text/css">
</style>
    </head>
    <body>
    	<h2>jQuery getJSON - demo</h2>
    </body>
</html>